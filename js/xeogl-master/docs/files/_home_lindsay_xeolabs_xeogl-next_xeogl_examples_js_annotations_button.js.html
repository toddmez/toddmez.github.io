<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/home/lindsay/xeolabs/xeogl-next/xeogl/examples/js/annotations/button.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link href='https://fonts.googleapis.com/css?family=Exo+2:400,800,900,700,600,500|Roboto:100,300,400,500,700,900'  rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">

                <h1 class="projectTitle"><a href="../../">xeogl</a> / <a href="../../docs">API Docs</a></h1>

        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">

    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AABBGeometry.html">AABBGeometry</a></li>
            
                <li><a href="../classes/AABBHelper.html">AABBHelper</a></li>
            
                <li><a href="../classes/AmbientLight.html">AmbientLight</a></li>
            
                <li><a href="../classes/Annotation.html">Annotation</a></li>
            
                <li><a href="../classes/AnnotationStory.html">AnnotationStory</a></li>
            
                <li><a href="../classes/AxisHelper.html">AxisHelper</a></li>
            
                <li><a href="../classes/BIMServerModel.html">BIMServerModel</a></li>
            
                <li><a href="../classes/BoxGeometry.html">BoxGeometry</a></li>
            
                <li><a href="../classes/BuildableModel.html">BuildableModel</a></li>
            
                <li><a href="../classes/Button.html">Button</a></li>
            
                <li><a href="../classes/Camera.html">Camera</a></li>
            
                <li><a href="../classes/CameraControl.html">CameraControl</a></li>
            
                <li><a href="../classes/CameraFlightAnimation.html">CameraFlightAnimation</a></li>
            
                <li><a href="../classes/CameraFollowAnimation.html">CameraFollowAnimation</a></li>
            
                <li><a href="../classes/CameraPath.html">CameraPath</a></li>
            
                <li><a href="../classes/CameraPathAnimation.html">CameraPathAnimation</a></li>
            
                <li><a href="../classes/Canvas.html">Canvas</a></li>
            
                <li><a href="../classes/Clip.html">Clip</a></li>
            
                <li><a href="../classes/ClipControl.html">ClipControl</a></li>
            
                <li><a href="../classes/ClipHelper.html">ClipHelper</a></li>
            
                <li><a href="../classes/Component.html">Component</a></li>
            
                <li><a href="../classes/CubeTexture.html">CubeTexture</a></li>
            
                <li><a href="../classes/CubicBezierCurve.html">CubicBezierCurve</a></li>
            
                <li><a href="../classes/Curve.html">Curve</a></li>
            
                <li><a href="../classes/CustomProjection.html">CustomProjection</a></li>
            
                <li><a href="../classes/CylinderGeometry.html">CylinderGeometry</a></li>
            
                <li><a href="../classes/DirLight.html">DirLight</a></li>
            
                <li><a href="../classes/EdgeMaterial.html">EdgeMaterial</a></li>
            
                <li><a href="../classes/EmphasisMaterial.html">EmphasisMaterial</a></li>
            
                <li><a href="../classes/Fresnel.html">Fresnel</a></li>
            
                <li><a href="../classes/Frustum.html">Frustum</a></li>
            
                <li><a href="../classes/Geometry.html">Geometry</a></li>
            
                <li><a href="../classes/GeometryBuilder.html">GeometryBuilder</a></li>
            
                <li><a href="../classes/GLTFModel.html">GLTFModel</a></li>
            
                <li><a href="../classes/Group.html">Group</a></li>
            
                <li><a href="../classes/Input.html">Input</a></li>
            
                <li><a href="../classes/LambertMaterial.html">LambertMaterial</a></li>
            
                <li><a href="../classes/LightMap.html">LightMap</a></li>
            
                <li><a href="../classes/Material.html">Material</a></li>
            
                <li><a href="../classes/Mesh.html">Mesh</a></li>
            
                <li><a href="../classes/MetallicMaterial.html">MetallicMaterial</a></li>
            
                <li><a href="../classes/Model.html">Model</a></li>
            
                <li><a href="../classes/OBBGeometry.html">OBBGeometry</a></li>
            
                <li><a href="../classes/Object.html">Object</a></li>
            
                <li><a href="../classes/OBJModel.html">OBJModel</a></li>
            
                <li><a href="../classes/Ortho.html">Ortho</a></li>
            
                <li><a href="../classes/OutlineMaterial.html">OutlineMaterial</a></li>
            
                <li><a href="../classes/Path.html">Path</a></li>
            
                <li><a href="../classes/PathGeometry.html">PathGeometry</a></li>
            
                <li><a href="../classes/Perspective.html">Perspective</a></li>
            
                <li><a href="../classes/PhongMaterial.html">PhongMaterial</a></li>
            
                <li><a href="../classes/Pin.html">Pin</a></li>
            
                <li><a href="../classes/PlaneGeometry.html">PlaneGeometry</a></li>
            
                <li><a href="../classes/PlaneHelper.html">PlaneHelper</a></li>
            
                <li><a href="../classes/PointLight.html">PointLight</a></li>
            
                <li><a href="../classes/QuadraticBezierCurve.html">QuadraticBezierCurve</a></li>
            
                <li><a href="../classes/ReflectionMap.html">ReflectionMap</a></li>
            
                <li><a href="../classes/Scene.html">Scene</a></li>
            
                <li><a href="../classes/SceneJSModel.html">SceneJSModel</a></li>
            
                <li><a href="../classes/Shadow.html">Shadow</a></li>
            
                <li><a href="../classes/Skybox.html">Skybox</a></li>
            
                <li><a href="../classes/SpecularMaterial.html">SpecularMaterial</a></li>
            
                <li><a href="../classes/SphereGeometry.html">SphereGeometry</a></li>
            
                <li><a href="../classes/Spinner.html">Spinner</a></li>
            
                <li><a href="../classes/SplineCurve.html">SplineCurve</a></li>
            
                <li><a href="../classes/SplineCurveHelper.html">SplineCurveHelper</a></li>
            
                <li><a href="../classes/SpotLight.html">SpotLight</a></li>
            
                <li><a href="../classes/StereoEffect.html">StereoEffect</a></li>
            
                <li><a href="../classes/STLModel.html">STLModel</a></li>
            
                <li><a href="../classes/Story.html">Story</a></li>
            
                <li><a href="../classes/TeapotGeometry.html">TeapotGeometry</a></li>
            
                <li><a href="../classes/TestModel.html">TestModel</a></li>
            
                <li><a href="../classes/Texture.html">Texture</a></li>
            
                <li><a href="../classes/TorusGeometry.html">TorusGeometry</a></li>
            
                <li><a href="../classes/VectorTextGeometry.html">VectorTextGeometry</a></li>
            
                <li><a href="../classes/Viewport.html">Viewport</a></li>
            
                <li><a href="../classes/xeogl.xeogl.html">xeogl.xeogl</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..//modules/animation.html">animation</a></li>
            
                <li><a href="..//modules/annotations.html">annotations</a></li>
            
                <li><a href="..//modules/camera.html">camera</a></li>
            
                <li><a href="..//modules/canvas.html">canvas</a></li>
            
                <li><a href="..//modules/clipping.html">clipping</a></li>
            
                <li><a href="..//modules/controls.html">controls</a></li>
            
                <li><a href="..//modules/curves.html">curves</a></li>
            
                <li><a href="..//modules/effects.html">effects</a></li>
            
                <li><a href="..//modules/generation.html">generation</a></li>
            
                <li><a href="..//modules/geometry.html">geometry</a></li>
            
                <li><a href="..//modules/helpers.html">helpers</a></li>
            
                <li><a href="..//modules/input.html">input</a></li>
            
                <li><a href="..//modules/lighting.html">lighting</a></li>
            
                <li><a href="..//modules/materials.html">materials</a></li>
            
                <li><a href="..//modules/math.html">math</a></li>
            
                <li><a href="..//modules/meshes.html">meshes</a></li>
            
                <li><a href="..//modules/models.html">models</a></li>
            
                <li><a href="..//modules/objects.html">objects</a></li>
            
                <li><a href="..//modules/rendering.html">rendering</a></li>
            
                <li><a href="..//modules/scene.html">scene</a></li>
            
                <li><a href="..//modules/skyboxes.html">skyboxes</a></li>
            
                <li><a href="..//modules/stories.html">stories</a></li>
            
                <li><a href="..//modules/xeogl.html">xeogl</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <!--<div id="api-options">-->
        <!--Show:-->
        <!--<label for="api-show-inherited">-->
            <!--<input type="checkbox" id="api-show-inherited" checked>-->
            <!--Inherited-->
        <!--</label>-->

        <!--<label for="api-show-protected">-->
            <!--<input type="checkbox" id="api-show-protected">-->
            <!--Protected-->
        <!--</label>-->

        <!--<label for="api-show-private">-->
            <!--<input type="checkbox" id="api-show-private">-->
            <!--Private-->
        <!--</label>-->
        <!--<label for="api-show-deprecated">-->
            <!--<input type="checkbox" id="api-show-deprecated">-->
            <!--Deprecated-->
        <!--</label>-->

    <!--</div>-->


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: /home/lindsay/xeolabs/xeogl-next/xeogl/examples/js/annotations/button.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 A **Button** is a clickable {{#crossLink &quot;Pin&quot;}}{{/crossLink}} that&#x27;s attached to the surface of an {{#crossLink &quot;Mesh&quot;}}{{/crossLink}}.

 @class Button
 @module xeogl
 @submodule annotations
 @constructor
 @param [scene] {Scene} Parent {{#crossLink &quot;Scene&quot;}}Scene{{/crossLink}} - creates this Pin in the default
 {{#crossLink &quot;Scene&quot;}}Scene{{/crossLink}} when omitted.
 @param [cfg] {*} Configs
 @param [cfg.id] {String} Optional ID, unique among all components in the parent {{#crossLink &quot;Scene&quot;}}Scene{{/crossLink}},
 generated automatically when omitted.
 @param [cfg.meta] {String:Object} Optional map of user-defined metadata to attach to the Button.
 @param [cfg.mesh] {Number|String|Mesh} ID or instance of the {{#crossLink &quot;Mesh&quot;}}{{/crossLink}} the Button is attached to.
 @param [cfg.bary=[0.3,0.3,0.3]] {Float32Array} Barycentric coordinates of the Button within its triangle.
 @param [cfg.primIndex=0] {Number} Index of the triangle containing the Button. Within the {{#crossLink &quot;Mesh&quot;}}{{/crossLink}} {{#crossLink &quot;Geometry&quot;}}{{/crossLink}}
 {{#crossLink &quot;Geometry/indices:property&quot;}}{{/crossLink}}, this is the index of the first
 element for that triangle.
 @param [cfg.offset=0.2] {Number} How far the Button is lifted out of its triangle, along the surface normal vector. This is used when occlusion culling, to ensure that the Button is not lost inside the surface it&#x27;s attached to.
 @param [cfg.occludable=true] {Boolean} Indicates whether occlusion testing is performed for the Button, where it will be flagged invisible whenever it&#x27;s hidden by something else in the 3D camera.
 @param [cfg.glyph=&quot;&quot;] {String} Short piece of text to show inside the pin for the Button. Automatically truncated to 2 characters.
 @param [cfg.pinShown=true] {Boolean} Specifies whether a UI element is shown at the Button&#x27;s pin position (typically a circle).
 @param [cfg.zIndex] {Number} Optional CSS z-index value for HTML button element.
 @extends Pin
 */
xeogl.Button = xeogl.Pin.extend({

    type: &quot;xeogl.Button&quot;,

    _init: function (cfg) {

        this._super(cfg);

        this._spotClickable = document.createElement(&quot;a&quot;);
        this._spotClickable.href = &quot;javascript:xeogl.scenes[\&quot;&quot; + this.scene.id + &quot;\&quot;].components[\&quot;&quot; + this.id + &quot;\&quot;]._pinClicked()&quot;;
        this._spotClickable.style[&quot;display&quot;] = &quot;block&quot;;
        this._spotClickable.style[&quot;content&quot;] = &#x27;&#x27;;
        this._spotClickable.style[&quot;position&quot;] = &quot;absolute&quot;;
        this._spotClickable.style[&quot;width&quot;] = &quot;50px&quot;;
        this._spotClickable.style[&quot;height&quot;] = &quot;50px&quot;;
        this._spotClickable.style[&quot;border-radius&quot;] = &quot;25px;&quot;;
        this._spotClickable.style[&quot;visibility&quot;] = &quot;hidden&quot;;
        this._spotClickable.style[&quot;z-index&quot;] = 0;
        document.body.appendChild(this._spotClickable);

        this._spot = document.createElement(&quot;div&quot;);
        this._spot.style[&quot;pointer-events&quot;] = &quot;none&quot;;
        this._spot.innerText = &quot;i&quot;;
        this._spot.style[&quot;color&quot;] = &quot;#ffffff&quot;;
        this._spot.style[&quot;line-height&quot;] = 1.8;
        this._spot.style[&quot;text-align&quot;] = &quot;center&quot;;
        this._spot.style[&quot;font-family&quot;] = &quot;monospace&quot;;
        this._spot.style[&quot;font-weight&quot;] = &quot;bold&quot;;
        this._spot.style[&quot;position&quot;] = &quot;absolute&quot;;
        this._spot.style[&quot;width&quot;] = &quot;25px&quot;;
        this._spot.style[&quot;height&quot;] = &quot;25px&quot;;
        this._spot.style[&quot;border-radius&quot;] = &quot;15px&quot;;
        this._spot.style[&quot;border&quot;] = &quot;2px solid #ffffff&quot;;
        this._spot.style[&quot;background&quot;] = &quot;black&quot;;
        this._spot.style[&quot;visibility&quot;] = &quot;hidden&quot;;
        this._spot.style[&quot;box-shadow&quot;] = &quot;5px 5px 15px 1px #000000&quot;;
        this._spot.style[&quot;z-index&quot;] = 0;

        const zIndex = cfg.zIndex || 0;
        this._spot.style[&quot;z-index&quot;] = zIndex;
        this._spot.style[&quot;zIndex&quot;] = zIndex;
        this._spotClickable.style[&quot;z-index&quot;] = zIndex;
        this._spotClickable.style[&quot;zIndex&quot;] = zIndex;

        document.body.appendChild(this._spot);

        this.glyph = cfg.glyph;
        this.pinShown = cfg.pinShown;

        this._tick = this.scene.on(&quot;tick&quot;, this._updateLayout, this);

        this.on(&quot;visible&quot;, this._updateVisibility, this);

        //  this._updateVisibility();
    },

    _pinClicked: function () {

        /**
         Fired whenever the mouse is clicked on this Button&#x27;s {{#crossLink &quot;Button/pin:property&quot;}}{{/crossLink}}.

         @event pinClicked
         */
        this.fire(&quot;pinClicked&quot;, this)
    },

    _props: {

        /**
         Short piece of text to show inside the pin for the Button.

         Usually this would be a single number or letter.

         Automatically truncated to 2 characters.

         Fires a {{#crossLink &quot;Button/glyph:event&quot;}}{{/crossLink}} event on change.

         @property glyph
         @default &quot;&quot;
         @type {String}
         */
        glyph: {
            set: function (glyph) {

                if (this._glyph === glyph) {
                    return;
                }

                this._glyph = glyph || &quot;&quot;; // TODO: Limit to 2 chars
                this._spot.innerText = this._glyph;

                /**
                 Fired whenever this Button&#x27;s {{#crossLink &quot;Button/glyph:property&quot;}}{{/crossLink}} property changes.

                 @event glyph
                 @param value {Number} The property&#x27;s new value
                 */
                this.fire(&quot;glyph&quot;, this._glyph);
            },
            get: function () {
                return this._glyph;
            }
        },

        /**
         Specifies whether a UI element is shown at the Button&#x27;s pin position (typically a circle).

         Fires a {{#crossLink &quot;Button/pinShown:event&quot;}}{{/crossLink}} event on change.

         @property pinShown
         @default true
         @type {Boolean}
         */
        pinShown: {
            set: function (shown) {

                shown = shown !== false;

                if (this._pinShown === shown) {
                    return;
                }

                this._pinShown = shown;
                this._spot.style.visibility = this._pinShown ? &quot;visible&quot; : &quot;hidden&quot;;
                this._spotClickable.style.visibility = this._pinShown ? &quot;visible&quot; : &quot;hidden&quot;;

                /**
                 Fired whenever this Button&#x27;s {{#crossLink &quot;Button/pinShown:property&quot;}}{{/crossLink}} property changes.

                 @event pinShown
                 @param value {Number} The property&#x27;s new value
                 */
                this.fire(&quot;pinShown&quot;, this._pinShown);
            },
            get: function () {
                return this._pinShown;
            }
        }
    },

    _updateVisibility: function () {
        const visible = this.visible;
        this._spotClickable.style.visibility = visible &amp;&amp; this._pinShown ? &quot;visible&quot; : &quot;hidden&quot;;
        this._spot.style.visibility = visible &amp;&amp; this._pinShown ? &quot;visible&quot; : &quot;hidden&quot;;
    },

    _updateLayout: function () {
        const visible = this.visible;
        if (visible) {
            const canvas = this.scene.canvas.canvas;
            const left = canvas.offsetLeft;
            const top = canvas.offsetTop;
            const canvasPos = this.canvasPos;
            this._spot.style.left = (Math.floor(left + canvasPos[0]) - 12) + &quot;px&quot;;
            this._spot.style.top = (Math.floor(top + canvasPos[1]) - 12) + &quot;px&quot;;
            this._spotClickable.style.left = (Math.floor(left + canvasPos[0]) - 25 + 1) + &quot;px&quot;;
            this._spotClickable.style.top = (Math.floor(top + canvasPos[1]) - 25 + 1) + &quot;px&quot;;
            //this._spot.style[&quot;z-index&quot;] = 90005 + Math.floor(this.viewPos[2] * 10) + 1;
        }
    },

    getJSON: function () {
        const math = xeogl.math;
        const json = {
            primIndex: this.primIndex,
            bary: math.vecToArray(this.bary),
            offset: this.offset,
            occludable: this.occludable,
            glyph: this._glyph,
            pinShown: this._pinShown
        };
        if (this._attached.mesh) {
            json.mesh = this._attached.mesh.id;
        }
        return json;
    },

    _destroy: function () {
        this._super();
        this.scene.off(this._tick);
        this._spot.parentNode.removeChild(this._spot);
        this._spotClickable.parentNode.removeChild(this._spotClickable);
    }
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
